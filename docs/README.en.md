# _Online Store_
[![Static Badge](https://img.shields.io/badge/Python-blue?style=flat&logo=Python&labelColor=ffff99&color=0066ff)](https://www.python.org)
[![Static Badge](https://img.shields.io/badge/-Django-006400?style=&logo=django)](https://www.djangoproject.com)
[![Static Badge](https://img.shields.io/badge/Django%20Rest%20Framework-FF4500?logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAABlBMVEUAAACjAAB%2BWVr2AAAAAXRSTlMAQObYZgAAADBJREFUeAFjgAD2B0BC%2FgeQsP8DI%2Br%2FYSMQSmA6%2BD8ACeYDDHAA5oIlyDQU4iAwAAC4HiJpG4n1oQAAAABJRU5ErkJggg%3D%3D&labelColor=white)](https://www.django-rest-framework.org)
[![Static Badge](https://img.shields.io/badge/Swagger-3CB371?logo=swagger&logoColor=black)](https://swagger.io)
[![Static Badge](https://img.shields.io/badge/PostgreSQL-blue?style=flat&logo=postgresql&labelColor=white)](https://www.postgresql.org)\
[![Static Badge](https://img.shields.io/badge/Celery-006400?style=flat&logo=Celery&logoColor=green)](https://docs.celeryq.dev/en/stable/)
[![Static Badge](https://img.shields.io/badge/Redis-ff5050?style=flat&logo=Redis&labelColor=white)](https://redis.io)
[![Static Badge](https://img.shields.io/badge/RabbitMQ-white?style=flat&logo=RabbitMQ)](https://www.rabbitmq.com)
[![Static Badge](https://img.shields.io/badge/Sentry-800080?style=flat&logo=Sentry&logoColor=800080&labelColor=white)](https://sentry.io)
[![Static Badge](https://img.shields.io/badge/yookassa-blue?logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAClklEQVR4AWIYumAU1AF4rQdYuYIoAMOntm3bjmvbbVC3wbPj2o3aoI5quw1r27a5etb0z325q%2BzcfZ7kWw7OHWeJRNoEsOtFIOI3%2FklhJb9GbKV4b46hmIcwLMRotCOA8p68%2F%2BCS%2FKcIh0jCL7PxshiGnXiNZGRBIRtp%2BIzjmEEgVXN6xElZh%2BZprJiFo4wub4GtcEAhmFScQj%2BJ%2BmsEQEDuALqhh4VuqAKBoBeuQ%2BXDe0ySBHPeEAwfruIvfgfwB58xAIKOuAtVAN8w2hjOqF9GABuDdR%2BG0G0VeT8CVQgeo62xgvgwAnaLzCkYjNlIhyokmyTKXlr4UAc3LTImYzouQFlIwyOcw004oSx8RV%2BRKJfwYYNFRhfWB%2BmlD5iPeiiH6hiFG1Aa2VhtzuzRSNFkTMQlZEMF8A%2FjIQF0wTMojetmxoZ4ajEJf0Jp7GYylTYbNVIU7xHgnd%2FioTR%2BCRlhK8mXbZpMWciA0giDSLjfXh%2Fu7oWBcGnKpnOoJJkZZyIjHwGEQ3gI8Ulhf816B1gEkEY3OcyMLfEuf0PgKA3PEIQTTOhfcwhioTR%2BiJEojDL8sD%2Bfk3ACJIBOeAKlccn%2FQFqEbM0ydARZhgv8luFwXA2yDJf4B9AZ3zQb0cU8bkQOKAsf0cP%2FWK6A08W0FdOrzpJeAdgQcNKkFMFhdA8tEPBi0hc277WKYRB0wB2oAviMYcbFZkpGwLteJURiLVZjOdr4XUiuQeXDG4yVCFdOXWFOi8tmhBfv228U6D5sgT0PV7Lj6C3RNnedeU5GwWjkBFKW9yEWl9JUfMZRTEMVo3y4AyhQinR49ZRxLW%2BGIZjrfS0nyLYoZ%2BY1Go6x%2FR8VOyZ5oODE0zEphOL8Z%2BAgH5RgFAAAnJyfQ6tNOroAAAAASUVORK5CYII%3D&labelColor=white)
](https://yookassa.ru)
[![Static Badge](https://img.shields.io/badge/webhook-%23ff0066?logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAFwAAABcCAMAAADUMSJqAAAAwFBMVEX%2F%2F%2F82R0%2Fr6%2BvnHmL19fXt7e329vbs7Oz39%2Ff09PT4%2BPjv7%2B%2Fz8%2FP5%2Bfn7%2B%2Fvy8vL8%2FPzw8PDx8fH%2B%2Fv7u7u76%2BvoqPkfmAFUYMTyQlpoeNT%2FmAFn5%2F%2F8wQkvDxsjmD13c3t%2B3u70HKTVOW2Jga3H3wc%2FnN23319%2Fs9PL56%2B%2Frao1pc3ihpqnxscFXY2mGjZHmAE12f4TP0tPs3%2BLrdZbshKD1q77pRXbqlKvpUHvryNLqtcLtjafqXoUAABpCUVn7o1AhAAALy0lEQVRogbVabVfqvBINtU2TtulL0hSoBYuI4BFBUY8ez3Ou%2F%2F9f3UmalJYXPWs993aRL6ydYbqTzOyZgBDyfIFCTyDuxSjxGKIeQdhzUeBRxLwExV6GhBci5HsKjFAO4KwFB8j1MCItmGuwUGB4fAfwDuAdwDuAd8C4A8adCEmHo9QBrANYx2mGB%2BDQSRF3JIocMO6AcQAzAMddsHZF%2B%2B4D2ge0D2gfI%2ByDeR%2FM%2B2DeN644HXDmgy8%2B%2BOKTE%2BAcwJ72%2B7Qr8J4OvKcDpDh5Y1i583cv6usJAnme4hxc8STQGGjOXeCceFHLeerlje%2FK71yDG86jFkxhkRIkNbh5UfG%2F4%2FzEi6IwFyLMU5HlsUhyJqIc0DlwnoP5HHzPYUYO7uTwEx6AcxgKzHMwDWCaEw0mOdVgmXMDDsGN%2Fwvnnl5Q8DsEv0PwOwS%2Fw0DQEAs3dAUJqQjCRLCQizjMRBpmCK1WCHEAcwAnGkw0GGtwBODEgEPx95yD7%2F7zcvHwsFg%2Bw4HK%2FopznqVplsVpksk0yoKUZiR1M5zizE1JRtMgi1KZRQgtXm4vh0P4DC%2FfXj8EijLWTuiCWZbABJ6mIf87zlfhz4vh1UX7XA1vF274PedxzLmME87iiAcwSEw5Tl3uppjTmPAoDni1uBheHDzDt2XVgGMAx3twFDOexJLzOD7Fud93Raxejkxr799X8TecJ4mUScJklAR60IRIN8ESJ64ehGa%2FLk%2FYVs7%2FIFEDthNIQmWQRJLBkDw55twELuKDK34C5%2BH26rTti4vLH6uDwGU4R4ZzxqIo0INGBAZmrh4uw2rQ4Nfe9pXaK8POe1y%2BVF1wRBmBEUSRHuyQ814MpUiuXltbV49v74uPj8X77WP7e8OHVf9F%2B5xTGgTNIHq4emA9MGUfj3sv76qKSEmqavmjXeHLO9KCXT2IHmAxooZzdIbz1a11%2B%2BJjZWMiBIHf9n2uflQHnIsO54S4rhq4M1w7qgfj4tVbVhEXCwEjxS6uni0zj0tpJ%2BDO0Fa%2F4bxdzWcIWlG9vp%2FP72cOF2i1NL5fvXzBOYbHPTPI0jD%2B%2BFFhLNZlMYGnLGYpxtVPy8wd6U3qPF9yXr1fGmKBb7odDcwzWrsCVWY5hr%2FlWc77bPcYJ9Vbw8pwSUi6LgftM9rBpnkwv%2FxakVOsw%2FiS88os5xuA%2FMne9mCyifyUGeO%2F2FnOA7Ozu7u72bAY3w3NmlWEzTqOK9cJkWa1r5jb3%2BHEnp0vOV82xi9%2FrnK0LbrGyzXKVi%2BN8cfznNPDyELVcNWIrfGHgKL7Li2DYoxo9WqMJ1JNwPQwutCvOM8%2FrOdI0EPjPEXWOPXOca4iOetF8jY4u8%2BG838qFoz7tExxUP0weymIVCTvR3MGeYJ9yTkxxv%2BsQlRf9zxPEM%2F%2FXF0q87fV2XiemAya2AyaQFJMICnCqGx0uqOxuO%2B4XmxRHCXV3eL1bTj8U5kJNosmJosmX%2BqWyuwHIN3JeLFnfTLXiturEHl%2BWLCzOTROuVYtexHiQvbHkP0JDxY2KKaco3qw971cY9aAE9iIGgyqhe9VS5xlaXzMeSedS8cExctXcIWz8XVp7Y9E8oVAs5xnRinyUDbiLwPxl2GBMyrIyuy2i%2BFPAQIQRbtZYVmXSloCmGowSMuskZayKy2%2F1Ip3Np8N35s8hO1JLZ2%2F0IpH6hxEK7hiVG7V5ufhn7tVqJS5MT65V%2Bpcq1zcSuJIgDoXIOdBxiuV%2BxXnzKHCJlHQFT%2F1S9rQO5qKb7WiqkBtkcNVkQOFQlNZUF1ZLPdS7vKWw5zkc2K2IzKVBTaVxUEJpUrXb%2FT5arGXEa%2Ba96lxvZzx7zjvV6E6cLUVdKRj0UMri5ymbN3Y0wTlnwW3FbSf6Sq0qaB9U%2Bb0OIcZrSv77bhoaqK8HtmTJOHN00wCV%2BwE5%2F4JIcqQqFXQBc7B7%2BrDntJfbcH1ZDd7PRvfzz8%2F5zfbGUYZPVrQbmkZa%2FPhev6fnVoh5YrvvlnH7zxTh4Z1e06V2IC1nRTF9XyKeXJQ%2Bx8saI5mg3JSrLlZ0JWVJ5fv%2ByKX9oO72fjl5yw9bCz0aEH1p9oLk5uGFse9s6t5u%2FL2dWhSHhtXizAHPru0NAtqjONZaTZxGugFtdkGNNeqU%2BRG69PWJ8UUjOdtY8H0ClSPw0NrK6rKaaAbC%2B1qKs3l%2B83IYcJ8ctL6YDQLUNpuxQ7ndNYKtmIcI%2BV7q6BVYdttLExbKCznpGe9c4hyffxVXwnt9hPKjYT9YrWiWk0BJxp5nmlC5eYkgSr9vLmfF2Unj%2ByipinSbSz4uAUUxbhWh%2BjusV3Nw8YCqktl%2Bh6iFwbZNt0WdvZkQLuNhSbk7jXVaBsJDlF0ZVdz%2BFHpKNptiOCnYrSpEVG5JQT79b1d42JMIFXk3cYCqtvFnEFOgFhU%2Fbar%2BXKimeM58ylJ4UBLJEPVnUOtmizqzHBu01z8ZJbleorcEOLL4rddzaHLm8wlVJ%2FD5kSaCEhzAu1ms11AsCCB3Wug9SDVqTRnOfeM6CnHCLmru5fHyzYHPaCTzRw%2FRi5fw1qW5WgbQiAS9uCOmlaeB9JCNUS4azLvZC5cXn1cdSrbt1XUqoUGnMlGi0T5xlBRDGqWBll7SlAjLYwrrhGa8D3Nl91GwnAZwh6PoEyIoma4MAgMxj%2FbDTYpHMSStfHwyTYWeAxSTgafBhQnRHSrfSg04wDPxqeersKb3KRumpgvPlkj50yCdpqvi23sx4teB%2BQqQSJ6KosTTy8EXO%2Fg5W7MV3XTEWW6IeKa01msY2kVos2cC6BheyaUdJ5inSbS8FLUsZbQDefcZN1yBjXgr77xnyCgtycC%2BMEDRPvEbIuyNo2FSDVFUmt8GlD51jf%2BXpH2EHxl%2FB6x2BykcodZp7FgzicY96s%2FfeMPR0XLGc8hURtayl0jRptmCK6bnyzGadDGQrMVnzFF35pWjEqaGvomDtOlohEWtfn5DWzj58eObUj6Pqf2YF%2F3nn5pCtlcmg09MPvctC9Sk1pKh%2BDqn85eHC4DKM3NJlgzQqCeJK4eQScBQJKIsTTvP7kRTXluhejWbnQ3QNW%2BE%2FT4sIK61ThU7vJGc4WQ6DhkxvW%2B17AVUHBZI%2BukiS2qjQEfZr0oa4aV76pQg2rto8KusOm4QN1%2BSeASMS10l6Qo16Jj47oOdHPExhbfrtlkTkDMVc%2F%2F%2FLp9%2B%2FNAVlCS7fahdB8TuVNjiOXZ%2Bn4zv1lzAUrEnVgT2HBu21Bx694NhvBMqsqFEbiuaPUVvJTtWQViNxk4MSZEpgTHMcNQm1uBOprC0riUkJbzLLcrXcxrCsIC6lalcVErCcBx20AL6ewaAuEuzhlUxEpYEij2rOObbmOhafuxVi1MinGIZBDEUnZS46CIVAdCgWX6pL8tn2okGAnSWDjj0p6z611sW397GtOnffq%2Fvlnv6t10%2FTlqj%2BZol%2Fn2UGxsYTSaj6cKd3PdzoVUtm8smIZIwFzakVGwAUZl2QmqMCfSYYgxth31cKMurriJmQX2Ci7n82wIKbekI0SfTktFvWDS6zUW2hY3duZnQutoq3vhvAHH8pz18oZK0xA5bizQk7Mmo5mbd3ULhL%2FRiZecgA95r7HQu1ZwY9D%2BR1Pua8QTBYSRaXCa7jblofnycwpJO1LZswEfFbmBv550FggWbLND%2BQndgmfzUQ83WKvuQ0%2F881CJEWmbIoLyFE2f5mqvgNiZbMY7gVrVEoZ75QLbuB5vigZXzLdTycT%2BKifTVzmnLkRihGHzzmbT2oMa8PzFn3qf3RSAuyyg5HRjAdQi71yf6cZCFqA4IqAx9z0OrRS1JO6AMVTRMoJoYRsLveuzrxsL%2F%2FLiL%2FSsQofiPD9uLLCcqytLENygzD1PKfRGznMNPmgs6CtLo87%2ForHwry5bhS7O1DUx9wBrronbxkJ7Na96HJ69x0%2BP7vFJ5x6%2FqYjUNfHJxsL%2FhnPTWDh5Nd80FqSfda7mO%2BBMd1DgRVvw4T3%2BcWMBVglccR3TWPh3fyro%2Fx0iOvg7hOz%2BHcIzf4cID%2F4OgU%2F8HUKD%2FwsTjFJzpJbIUQAAAABJRU5ErkJggg%3D%3D&labelColor=white)](https://www.mango-office.ru/products/calltracking/for-marketing/osnovy/webhook-i-kak-ego-ispolzovat/)


>_Language: [Русский](../README.md), [English](README.en.md)_ 🌍

### 📃 Content
1. ✏️ [Project description](#project_desc)
   - 📋 [Tasks](#goals)
   - 📟 [Functionality](#func_abilities)
2. 📱 [Project technologies](#project_technologies)
3. 📚 [Dependencies used](#dependencies_used)
4. 📈 [Relationships between tables](#table)
5. 📽️ [Example work](#example_work)
6. 🔌 [Installation and launch](#installation_and_launch)
   - 📔 [Installing the project in the IDE](#installation_ide)
   - 🐳 [Installing the project in Docker](#installation_docker)
7. 📗 [API Documentation](#documentation_api)
8. 🔐 [License](#license)

<a name="project_desc"></a>
## ✏️ Description of the project ##
A project based on the Django Rest Framework, designed to show the interaction
of the "**Online Store**" with:  
>_Customer_, _Manager_ / _Admin_, _Provider_ and _Courier_.

<a name="goals"></a>
### 📋 Tasks ###
The project was developed with the aim of exploring the Django Rest Framework.\
Topics such as:
- Patterns of _MVC_, _MVP_. ✅
- Authentication _JWT_. ✅
- Authentication _sessions_. ✅
- Integration. ✅
- Registration via _SMTP_ protocol. ✅
- Registration, authorization using _Djoser_. ✅
- Optimization by connecting _phone tasks_. ✅
- Optimization using _Cache_. ✅
- The work of _queue brokers_ (Redis, RabbitMQ, Kafka). ✅
- The difference between _RabbitMQ_ and _Kafka_, the pros and cons of using them. ✅
- Working with the _Yookassa_ payment system. ✅
- The use of _webhook_. ✅

<a name="func_abilities"></a>
### 📟 Functional features ###
An approximate list of [endpoints](endpoints/Endpoints.en.md) and their capabilities.

<a name="project_technologies"></a>
## 📱 Project technologies ##
- Scheme - `Spectacular`.
- Registration - `SMTP`.
- Sending messages - `Djoser`.
- Error tracking - `Sentry`.
- Address verification via - `Google Maps`. **(In development)**
- Database Backup - `CeleryBeat`.
- Caching and Database - `Redis`.
- Background tasks - `Celery`.
- Queue broker - `RabbitMQ`.
- The payment system is `Yookassa`.
- Payment confirmation - `Webhook`.

<a name="dependencies_used"></a>
## 📚 Dependencies used ##
- `Python 3.11`
- `Django 4.2.7`
- `djangorestframework 3.14.0`
- `djangorestframework-simplejwt 5.3.0`
- `drf-spectacular 0.26.5`
- `djoser 2.2.2`
- `psycopg2 2.9.9`
- `redis 5.0.1`
- `rabbitmq-server 0.0.1`
- `celery 5.3.6`
- `django-celery-beat 2.5.0`
- `sentry-sdk 1.38.0`
- `yookassa 3.0.1`

<a name="table"></a>
## 📈 Relationships between tables ##
![img.png](images/img.png)

<a name="example_work"></a>
## 📽️ Example work. ##
1. An example of how [Database copying works](videos/Postman_t9M2iW3Xku.mp4) you can download and watch.
2. An example of the work of [Placing an order and paying for it in Yookassa](videos/pycharm64_Jr15ACpje5.mp4) you can download and watch.

<a name="installation_and_launch"></a>
## 🔌 Installation and launch ##
> [!WARNING]
> If you **have** all the following on your computer, you can skip this warning.
> - You may need to register in [Sentry](https://sentry.io)

<a name="installation_ide"></a>
### 📔 Installing the project in the IDE ###
- Cloning the repository:
```text
git clone https://github.com/AntonVagabond/online_store.git
```
- Creating a virtual environment and installing dependencies:
```text
python3.11 -m venv env
source env/bin/activate
pip install -r requirements.txt
```
- Creating `.env` based on `.env.example`
```.env
SECRET_KEY=
DEBUG=
ALLOWED_HOSTS=

PG_DATABASE=
PG_USER=
PG_PASSWORD=
DB_HOST=
DB_PORT=

SENTRY_DSN=

EMAIL_HOST=
EMAIL_PORT=
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=
EMAIL_USE_TLS=

REDIS_HOST=
REDIS_PORT=

RABBIT_HOST=
RABBIT_PORT=

CELERY_TASK_TRACK_STARTED=
ACCEPT_CONTENT=
RESULT_SERIALIZER=
TASK_SERIALIZER=
TIMEZONE=

YOOKASSA_SHOP_ID=
YOOKASSA_SECRET_KEY=
YOOKASSA_RETURN_URL=

STATIC_FILES=/path/to/static/
MEDIA_FILES=/path/to/media/
```

<a name="installation_docker"></a>
### 🐳 Installing the project in Docker ###
- Build of the project:
```docker
docker-compose up -d --build
```
- Creating migrations:
```docker
docker exec web python manage.py makemigrations
```
- Application of migrations:
```docker
docker exec web python manage.py migrate
```
- Initialization of the project:
```docker
docker-compose exec make initial
```
- Adding a superuser:
```
docker-compose exec web python manage.py createsuperuser
```

<a name="documentation_api"></a>
## 📗 API Documentation ##
API documentation is available at `/api/v1'.

<a name="license"></a>
## 🔐 License ##
For details, see the [LICENSE](LICENSE) file.